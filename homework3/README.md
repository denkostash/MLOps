# MLOps. Практическое задание №3

Развернуть микросервис в контейнере докер.

## Структура файлов и каталогов

###Папка src:

- train_model.py 
   - Загрузка набора данных
   - Разделение данных на тренировочные и тестовые наборы
   - Создание папки data, если она не существует
   - Запись датасета в CSV
   - Обучение модели
   - Сохранение модели

- app.py
   - Функция загрузки модели
   - Загрузка модели
   - Заголовок веб-приложения
   - Инструкция для пользователей
   - Загрузка файла пользователем
   - Обработка загруженного файла
   - Создание датафрейма
   - Предикт
   - Вывод предсказания
   - Обработка ошибок
   - Очистка загруженного файла
     
- Dockerfile - создает образ Docker, который содержит все необходимые зависимости и обученную модель машинного обучения, а затем запускает приложение Streamlit внутри контейнера.
   - Образ основан на базовом образе python:3.8, который содержит среду Python 3.8.
   - Установка зависимостей: Команда COPY копирует файл requirements.txt, который содержит список зависимостей проекта, в каталог /tmp внутри контейнера. Затем команда RUN использует pip для установки этих зависимостей.
   - Копирование файлов проекта: Команда COPY копирует все файлы и каталоги из текущего каталога в каталог /app внутри контейнера. Это копирует файлы проекта, такие как исходный код, данные и конфигурационные файлы, в контейнер.
   - Рабочий каталог: Команда WORKDIR устанавливает рабочий каталог для команд в контейнере на /app. Это означает, что последующие команды будут выполняться из каталога /app.
   - Обучение модели: Команда RUN выполняет сценарий Python /app/src/train_model.py внутри контейнера. Этот сценарий отвечает за обучение модели машинного обучения, которая будет использоваться для прогнозирования.
   - Запуск Streamlit: Команда CMD запускает приложение Streamlit, используя скрипт “src/app.py”. Флаги --server.port=8501 и --server.address=0.0.0.0 указывают, что приложение Streamlit должно работать на порту 8501 и принимать подключения с любого IP-адреса.

- docker-compose.yml - определяет набор служб Docker, которые можно запустить и управлять ими как единым приложением.
   - version: Указывает версию формата файла docker-compose.yml 3.8.
   - services: службы Docker
   - app: определение для службы
   - build: указывает на каталог, в котором находится файл Dockerfile для создания образа Docker
   - ports: отображает порты контейнера
   - volumes: определяет тома, которые будут монтироваться в контейнер

- requirements.txt - необходимые библиотеки для работы
